(this["webpackJsonpsmart-clock"]=this["webpackJsonpsmart-clock"]||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){},49:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),i=n(14),o=n.n(i),s=n(20),u=(n(36),n(10)),l=(n(37),n(3)),d=n(75),p=n(74),m=n(16),h=n(5),j=n.n(h),b=n(12),f=(n(39),n(28)),v=n.n(f);!function(e){e.Radio="Radio",e.TVInt="TV International",e.TVRO="TV Romania"}(r||(r={}));var O={backgroundImageUpdateIntervalSeconds:600,mediaPlayerStreams:[{id:"10",name:"EuroNews",url:"https://www.youtube.com/watch?v=sPgqEHsONK8",isRadio:!1,category:r.TVInt},{id:"20",name:"Al Jazeera",url:"https://www.youtube.com/watch?v=-upyPouRrB8",isRadio:!1,category:r.TVInt},{id:"30",name:"Sky News",url:"https://www.youtube.com/watch?v=9Auq9mYxFEE",isRadio:!1,category:r.TVInt},{id:"150",name:"Digi 24",url:function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://dai.google.com/linear/hls/event/OQfdjUhHSDSlb1fJVzehsQ/master.m3u8");case 2:return t=e.sent,e.next=5,t.text();case 5:return n=e.sent,r=n.split("\n").find((function(e){return e.includes("bandwidth/2917391.m3u8")})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isRadio:!1,category:r.TVRO},{id:"151",name:"Antena 3",url:function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.antena3.ro/live/");case 2:return t=e.sent,e.next=5,t.text();case 5:return n=e.sent,r=n.split("liveEmbedHTML5('"),e.abrupt("return",r[1].split("'")[0]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isRadio:!1,category:r.TVRO},{id:"155",name:"Realitatea",url:"https://livestream.realitatea.net/livestream/liverealitatea.stream/playlist.m3u8",isRadio:!1,category:r.TVRO},{id:"156",name:"KanalD",url:"https://stream1.kanald.ro/iphone/live.m3u8",isRadio:!1,category:r.TVRO},{id:"41",name:"Kiss FM",url:"https://live.kissfm.ro/kissfm.aacp",isRadio:!0,category:r.Radio},{id:"43",name:"Digi FM",url:"https://edge76.rcs-rds.ro/digifm/digifm.mp3",isRadio:!0,category:r.Radio},{id:"60",name:"3/24",url:"https://directes-tv-int.ccma.cat/int/ngrp:324_web/chunklist_b1728000.m3u8",isRadio:!1,category:r.TVInt},{id:"70",name:"PrimaTV",url:"https://stream1.1616.ro:1945/prima/livestream/playlist.m3u8?wowzatokenhash=hOdIznDoakApEuQ8FaFI3yrJuBMZHqCB7B3cWTmRWsc=",isRadio:!1,category:r.TVRO},{id:"100",name:"Radio 3",url:"https://rtvelivestreamv3.akamaized.net/rne_r3_main.m3u8",isRadio:!0,category:r.Radio},{id:"110",name:"iCat",url:"https://directes-radio-int.ccma.cat/int/mp4:icatfm/playlist.m3u8",isRadio:!0,category:r.Radio},{id:"120",name:"RadioParadise",url:"http://stream.radioparadise.com/aac-128",isRadio:!0,category:r.Radio},{id:"130",name:"LoFi",url:"https://www.youtube.com/watch?v=5qap5aO4i9A",isRadio:!1,category:r.Radio},{id:"200",name:"VH1",url:" https://content.uplynk.com/channel/36953f5b6546464590d2fcd954bc89cf.m3u8",isRadio:!1,category:r.TVInt}],weather:{apiURL:Object({NODE_ENV:"production",PUBLIC_URL:"/smart-clock",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_OPEN_WEATHER_URL||"https://www.sonicpix.ro/owproxy/",apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/smart-clock",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_OPEN_WEATHER_KEY||"nokey",latitude:41.376681,longitude:2.176177,units:"metric",tempSymbol:"\xb0C",lang:"en",weatherUpdateIntervalSeconds:3600}},g=O.weather,x=1e3*g.weatherUpdateIntervalSeconds,y=g.apiKey,w=g.apiURL;function S(){return R.apply(this,arguments)}function R(){return(R=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=setTimeout((function(){return t()}),5e3);navigator.geolocation.getCurrentPosition((function(t){clearTimeout(n),e(t)}),t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={latitude:g.latitude,longitude:g.longitude},e.prev=1,e.next=4,S();case 4:n=e.sent,t.latitude=n.coords.latitude,t.longitude=n.coords.longitude,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Unable to get location",e.t0);case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var P=v()((function(e){function t(){return n.apply(this,arguments)}function n(){return(n=Object(b.a)(j.a.mark((function t(){var n,r,a,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T();case 2:return n=t.sent,r=new URLSearchParams({units:g.units,lang:g.lang,lat:n.latitude.toString(),lon:n.longitude.toString(),exclude:"minutely,hourly",appid:y}).toString(),a="".concat(w,"?").concat(r),t.next=7,fetch(a);case 7:return c=t.sent,t.t0=e,t.next=11,c.json();case 11:t.t1=t.sent,t.t2={weather:t.t1},(0,t.t0)(t.t2);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return setInterval((function(){return e({date:new Date})}),1e3),setInterval((function(){return t()}),x),t(),{date:new Date,weather:null}})),k=n(1),N=function(e){return e.toString().padStart(2,"0")};var I=function(){var e=P((function(e){var t=e.date;return N(t.getHours())+":"+N(t.getMinutes())}));return Object(k.jsx)("div",{className:"Time",children:e})},_=n(17),M=n.n(_),C=(n(49),O.weather.tempSymbol);function A(e){return Math.round(parseFloat(e))+C}var D,L=function(e){var t,n=P((function(e){return e.weather})),r=e.simple;return Object(k.jsxs)("div",{className:"Weather",children:[!n&&Object(k.jsx)("div",{children:"Loading..."}),n&&n.current&&(r?Object(k.jsxs)("div",{children:[Object(k.jsx)(M.a,{name:"owm",iconId:n.current.weather[0].id.toString()}),"\xa0\xa0",A(n.current.temp)]}):Object(k.jsxs)("div",{className:"WeatherBackground",children:[Object(k.jsx)("div",{className:"WeatherCurrent",children:Object(k.jsxs)("div",{className:"columns is-mobile",children:[Object(k.jsxs)("div",{className:"column WeatherHumidity",children:["H: ",n.current.humidity,"%"]}),Object(k.jsxs)("div",{className:"column",children:[Object(k.jsx)(M.a,{name:"owm",iconId:n.current.weather[0].id.toString()}),"\xa0\xa0",A(n.current.temp)]}),Object(k.jsxs)("div",{className:"column WeatherWind",children:["W: ",(t=n.current.wind_speed,Math.round(3.6*parseFloat(t)).toString()+"Km/h")]})]})}),Object(k.jsx)("div",{className:"WeatherDaily",children:Object(k.jsx)("div",{className:"columns is-mobile",children:n.daily.map((function(e,t){return Object(k.jsxs)("div",{className:"column",children:[Object(k.jsx)("div",{children:(n=e.dt,new Date(1e3*n).toLocaleDateString("en",{weekday:"short",day:"numeric"}))}),Object(k.jsx)("div",{className:"WeatherIcon",children:Object(k.jsx)(M.a,{name:"owm",iconId:e.weather[0].id.toString()})}),Object(k.jsx)("div",{children:A(e.temp.day)})]},t);var n}))})}),Object(k.jsxs)("div",{className:"WeatherAlerts",children:["Timezone: ",n.timezone,n.alerts&&n.alerts.map((function(e,t){return 0===t&&Object(k.jsxs)("div",{children:[(n=e.start,new Date(1e3*n).toLocaleString(void 0,{weekday:"long",dayPeriod:"short"})),": ",e.event,"."]},t);var n}))]})]}))]})},U=n(29),W=n.n(U),F=(n(68),"streamID");!function(e){e.Loading="loading",e.Error="error",e.Playing="playing",e.Stopped="stopped"}(D||(D={}));var V=function(){var e=Object(a.useRef)(),t=Object(a.useState)(localStorage.getItem(F)),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(D.Stopped),o=Object(u.a)(i,2),s=o[0],l=o[1],d=Object(a.useState)(1),p=Object(u.a)(d,2),h=p[0],f=p[1],v=Object(a.useState)(),g=Object(u.a)(v,2),x=g[0],y=g[1],w=Object(a.useState)(),S=Object(u.a)(w,2),R=S[0],T=S[1],E=Object(a.useState)(""),P=Object(u.a)(E,2),N=P[0],_=P[1],M=Object(a.useState)(""),C=Object(u.a)(M,2),A=C[0],U=C[1];Object(a.useEffect)((function(){return function(){return clearTimeout(e.current)}}),[]),Object(a.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O.mediaPlayerStreams,e.prev=1,n=new URLSearchParams(window.location.search),!(r=Object.fromEntries(n.entries())).playlist){e.next=8;break}return e.next=7,H(r.playlist);case 7:t=e.sent;case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Unable to load custom playlist",e.t0);case 13:y(t);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()}),[]),Object(a.useEffect)((function(){return T(null===x||void 0===x?void 0:x.find((function(e){return e.id===r})))}),[r,x]),Object(a.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,l(D.Loading),e.prev=2,!R){e.next=11;break}if("function"!==typeof R.url){e.next=10;break}return e.next=7,R.url();case 7:t=e.sent,e.next=11;break;case 10:t=R.url;case 11:e.next=19;break;case 13:e.prev=13,e.t0=e.catch(2),U(r="Unable to get custom URL"),console.error(r,e.t0),n=!0;case 19:n?(U("Unable to load custom url"),l(D.Error),V(R)):l(t?D.Loading:D.Stopped),_(t);case 21:case"end":return e.stop()}}),e,null,[[2,13]])})))()}),[R]);var V=function(t){clearTimeout(e.current),_(""),e.current=setTimeout((function(){t&&T(Object(m.a)({},t))}),1e4)},H=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,a=r.split("#EXTINF:").reduce((function(e,t,n){var r=t.split(",");if(2===r.length){var a=r[1].split("\n");e.push({id:n.toString(),name:a[0],url:a[1].replace("http://","https://"),isRadio:!1,category:"IPTV"})}return e}),[]),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K={onTouchEnd:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()}};return Object(k.jsxs)("div",{className:"MediaPlayer",children:[Object(k.jsxs)("div",{className:"MediaPlayerScreen",children:[s===D.Stopped&&Object(k.jsx)("div",{className:"MediaPlayerScreen-info",children:Object(k.jsx)("h1",{children:"Media Player \ud83d\udcfa"})}),s===D.Error&&Object(k.jsxs)("div",{className:"MediaPlayerScreen-status",children:[Object(k.jsx)("h1",{children:"\ud83d\ude22 Error"}),Object(k.jsxs)("div",{children:["We are having problems loading ",null===R||void 0===R?void 0:R.name,"."]}),Object(k.jsx)("small",{children:A})]}),s===D.Loading&&Object(k.jsxs)("div",{className:"MediaPlayerScreen-status",children:[Object(k.jsx)("h1",{children:"\u23f3"}),"Loading ",null===R||void 0===R?void 0:R.name,"..."]}),s===D.Playing&&(null===R||void 0===R?void 0:R.isRadio)&&Object(k.jsxs)("div",{className:"MediaPlayerScreen-status",children:[Object(k.jsxs)("h2",{children:["\ud83d\udcfb",R.name]}),Object(k.jsx)("h1",{children:Object(k.jsx)(I,{})})]}),Object(k.jsx)(W.a,{className:"MediaPlayerReactPlayer",width:"100%",height:"100%",url:N,playing:!0,controls:!1,loop:!0,volume:h,onPlay:function(){l(D.Playing)},onError:function(e,t){return function(e,t){if(console.warn("React player error:",e,t),!0===(null===t||void 0===t?void 0:t.fatal)){l(D.Error);var n=(null===t||void 0===t?void 0:t.type)?"".concat(t.type," ").concat(t.details):"Unknown error";U(n),console.warn("Retry"),V(R)}}(e,t)}})]}),Object(k.jsxs)("div",{className:"MediaPlayerBottom",children:[Object(k.jsx)("div",{children:Object(k.jsx)(I,{})}),Object(k.jsx)("div",{children:Object(k.jsx)(L,{simple:!0})}),Object(k.jsx)("div",Object(m.a)(Object(m.a)({},K),{},{children:Object(k.jsx)("input",{type:"range",min:0,max:1,step:"any",value:h,onChange:function(e){return f(parseFloat(e.target.value))}})})),Object(k.jsx)("div",Object(m.a)(Object(m.a)({},K),{},{children:Object(k.jsx)("div",{className:"select is-small is-dark",children:Object(k.jsxs)("select",{value:r||"",onChange:function(t){return function(t){U(""),clearTimeout(e.current),c(t),localStorage.setItem(F,t)}(t.target.value)},children:[Object(k.jsx)("option",{value:"",children:"\u21e8 Choose channel"}),x&&Object(k.jsx)(k.Fragment,{children:Object.keys(x.reduce((function(e,t){return e[t.category]=t.category,e}),{})).map((function(e,t){return Object(k.jsx)("optgroup",{label:e,children:x.filter((function(t){return t.category===e})).map((function(e,t){return Object(k.jsx)("option",{value:e.id,children:e.name},t)}))},t)}))})]})})}))]})]})},H=(n(69),Array.from(Array(40).keys()).map((function(e){return"d".concat(e+1,".jpeg")}))),K=O.backgroundImageUpdateIntervalSeconds;var B={routes:[{path:"/MediaPlayer",Component:V},{path:"/",Component:function(){var e=Object(a.useState)(c()),t=Object(u.a)(e,2),n=t[0],r=t[1];function c(){return H[Math.floor(Math.random()*H.length)]}return Object(a.useEffect)((function(){var e=setInterval((function(){return r(c())}),1e3*K);return function(){return clearInterval(e)}}),[]),Object(k.jsxs)("div",{className:"MainScreen",style:{backgroundImage:"url(".concat("/smart-clock","/backgrounds/").concat(n,")")},children:[Object(k.jsx)("div",{className:"top",children:Object(k.jsx)(I,{})}),Object(k.jsx)("div",{className:"bottom",children:Object(k.jsx)(L,{})})]})}}]},z=!1;var q=function(){var e=Object(a.useState)("left"),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)({start:0,end:0}),i=Object(l.f)(),o=Object(l.g)(),s=function(e){return e.clientX||(e.targetTouches&&e.targetTouches.length>0?e.targetTouches[0].clientX:0)},m=function(e){c.current.start=s(e),c.current.end=s(e)},h=function(e){c.current.end=s(e)},j=function(e){var t=i.location.pathname,n=c.current,a=B.routes.findIndex((function(e){return e.path===t})),o=null;if(n.start-n.end>50)(o=a-1)<0&&(o=B.routes.length-1),r("left");else if(n.start-n.end<-50)(o=a+1)>B.routes.length-1&&(o=0),r("right");else if(!z||null===document.fullscreenElement)try{document.body.requestFullscreen(),z=!0}catch(s){console.error(s)}null!==o&&i.push(B.routes[o].path),n.start=0};return Object(k.jsxs)("div",{className:"App AppSwipe-".concat(n),onMouseDown:m,onMouseMove:h,onMouseUp:j,onTouchEnd:j,onTouchMove:h,onTouchStart:m,children:[Object(k.jsx)("div",{className:"AppPortraitWarning",children:"\u26a0\ufe0f Please rotate your device."}),Object(k.jsx)(d.a,{component:null,children:Object(k.jsx)(p.a,{classNames:"AppScreen",timeout:300,children:Object(k.jsx)(l.c,{location:o,children:B.routes.map((function(e){var t=e.path,n=e.Component;return Object(k.jsx)(l.a,{path:t,children:Object(k.jsx)("div",{className:"AppScreen",children:Object(k.jsx)(n,{})})},t)}))})},o.pathname)})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,76)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};o.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(s.a,{children:Object(k.jsx)(q,{})})}),document.getElementById("root")),J()}},[[72,1,2]]]);
//# sourceMappingURL=main.f445aa1f.chunk.js.map