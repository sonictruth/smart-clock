(this["webpackJsonpsmart-clock"]=this["webpackJsonpsmart-clock"]||[]).push([[0],{30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),s=a(14),i=(a(30),a(31),a(3)),l=a(73),d=a(72),u=(a(32),a(21)),j=a.n(u),h=function(e){return e.Radio="Radio",e.TVInt="TV International",e.TVRO="TV Romania",e}(h||{});var m={backgroundImageUpdateIntervalSeconds:600,mediaPlayerStreams:[{id:"41",name:"Europa FM",url:"https://astreaming.edi.ro:8443/europafm_aacp48k",isRadio:!0,category:h.Radio},{id:"43",name:"Digi FM",url:"https://edge76.rcs-rds.ro/digifm/digifm.mp3",isRadio:!0,category:h.Radio},{id:"120",name:"RadioParadise",url:"http://stream.radioparadise.com/aac-128",isRadio:!0,category:h.Radio}],weather:{apiURL:Object({NODE_ENV:"production",PUBLIC_URL:"/smart-clock",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_OPEN_WEATHER_URL||"https://www.sonicpix.ro/owproxy/",apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/smart-clock",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_OPEN_WEATHER_KEY||"nokey",latitude:41.376681,longitude:2.176177,units:"metric",tempSymbol:"\xb0C",lang:"en",weatherUpdateIntervalSeconds:3600}};const b=m.weather;b.weatherUpdateIntervalSeconds,b.apiKey,b.apiURL;var p=j()((e=>(setInterval((()=>e({date:new Date})),1e3),{date:new Date,weather:null}))),O=a(1);const g=function(e){return e.toString().padStart(2,"0")};var v=function(){const e=p((e=>{let{date:t}=e;return g(t.getHours())+":"+g(t.getMinutes())}));return Object(O.jsx)("div",{className:"Time",children:e})},f=a(12),x=a.n(f);a(42);const y=m.weather.tempSymbol;function S(e){return Math.round(parseFloat(e))+y}var E=function(e){const t=p((e=>e.weather)),a=e.simple;return Object(O.jsx)("div",{className:"Weather",children:t&&t.current&&(a?Object(O.jsxs)("div",{children:[Object(O.jsx)(x.a,{name:"owm",iconId:t.current.weather[0].id.toString()}),"\xa0\xa0",S(t.current.temp)]}):Object(O.jsxs)("div",{className:"WeatherBackground",children:[Object(O.jsx)("div",{className:"WeatherCurrent",children:Object(O.jsxs)("div",{className:"columns is-mobile",children:[Object(O.jsxs)("div",{className:"column WeatherHumidity",children:["H: ",t.current.humidity,"%"]}),Object(O.jsxs)("div",{className:"column",children:[Object(O.jsx)(x.a,{name:"owm",iconId:t.current.weather[0].id.toString()}),"\xa0\xa0",S(t.current.temp)]}),Object(O.jsxs)("div",{className:"column WeatherWind",children:["W: ",(n=t.current.wind_speed,Math.round(3.6*parseFloat(n)).toString()+"Km/h")]})]})}),Object(O.jsx)("div",{className:"WeatherDaily",children:Object(O.jsx)("div",{className:"columns is-mobile",children:t.daily.map(((e,t)=>{return Object(O.jsxs)("div",{className:"column",children:[Object(O.jsx)("div",{children:(a=e.dt,new Date(1e3*a).toLocaleDateString("en",{weekday:"short",day:"numeric"}))}),Object(O.jsx)("div",{className:"WeatherIcon",children:Object(O.jsx)(x.a,{name:"owm",iconId:e.weather[0].id.toString()})}),Object(O.jsx)("div",{children:S(e.temp.day)})]},t);var a}))})}),Object(O.jsxs)("div",{className:"WeatherAlerts",children:["Timezone: ",t.timezone,t.alerts&&t.alerts.map(((e,t)=>{return 0===t&&Object(O.jsxs)("div",{children:[(a=e.start,new Date(1e3*a).toLocaleString(void 0,{weekday:"long",dayPeriod:"short"})),": ",e.event,"."]},t);var a}))]})]}))});var n},w=a(22),N=a.n(w);a(43);const T="streamID";var P=function(e){return e.Loading="loading",e.Error="error",e.Playing="playing",e.Stopped="stopped",e}(P||{});var R=function(){const e=Object(n.useRef)(),[t,a]=Object(n.useState)(localStorage.getItem(T)),[r,c]=Object(n.useState)(P.Stopped),[o,s]=Object(n.useState)(1),[i,l]=Object(n.useState)(),[d,u]=Object(n.useState)(),[j,h]=Object(n.useState)(""),[b,p]=Object(n.useState)("");Object(n.useEffect)((()=>()=>clearTimeout(e.current)),[]),Object(n.useEffect)((()=>{(async()=>{let e=m.mediaPlayerStreams;try{const t=new URLSearchParams(window.location.search),a=Object.fromEntries(t.entries());a.playlist&&(e=await f(a.playlist))}catch(t){console.error("Unable to load custom playlist",t)}l(e)})()}),[]),Object(n.useEffect)((()=>u(null===i||void 0===i?void 0:i.find((e=>e.id===t)))),[t,i]),Object(n.useEffect)((()=>{(async()=>{let e,t=!1;c(P.Loading);try{d&&(e="function"===typeof d.url?await d.url():d.url)}catch(a){const e="Unable to get custom URL";p(e),console.error(e,a),t=!0}t?(p("Unable to load custom url"),c(P.Error),g(d)):c(e?P.Loading:P.Stopped),h(e)})()}),[d]);const g=t=>{clearTimeout(e.current),h(""),e.current=setTimeout((()=>{t&&u({...t})}),1e4)},f=async e=>{const t=await fetch(e);return(await t.text()).split("#EXTINF:").reduce(((e,t,a)=>{const n=t.split(",");if(2===n.length){const t=n[1].split("\n");e.push({id:a.toString(),name:t[0],url:t[1].replace("http://","https://"),isRadio:!1,category:"IPTV"})}return e}),[])},x={onTouchEnd:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation()};return Object(O.jsxs)("div",{className:"MediaPlayer",children:[Object(O.jsxs)("div",{className:"MediaPlayerScreen",children:[r===P.Stopped&&Object(O.jsx)("div",{className:"MediaPlayerScreen-info",children:Object(O.jsx)("h1",{children:"Media Player \ud83d\udcfa"})}),r===P.Error&&Object(O.jsxs)("div",{className:"MediaPlayerScreen-status",children:[Object(O.jsx)("h1",{children:"\ud83d\ude22 Error"}),Object(O.jsxs)("div",{children:["We are having problems loading ",null===d||void 0===d?void 0:d.name,"."]}),Object(O.jsx)("small",{children:b})]}),r===P.Loading&&Object(O.jsxs)("div",{className:"MediaPlayerScreen-status",children:[Object(O.jsx)("h1",{children:"\u23f3"}),"Loading ",null===d||void 0===d?void 0:d.name,"..."]}),r===P.Playing&&(null===d||void 0===d?void 0:d.isRadio)&&Object(O.jsxs)("div",{className:"MediaPlayerScreen-status",children:[Object(O.jsxs)("h2",{children:["\ud83d\udcfb",d.name]}),Object(O.jsx)("h1",{children:Object(O.jsx)(v,{})})]}),Object(O.jsx)(N.a,{className:"MediaPlayerReactPlayer",width:"100%",height:"100%",url:j,playing:!0,controls:!1,loop:!0,volume:o,onPlay:()=>{c(P.Playing)},onError:(e,t)=>((e,t)=>{if(console.warn("React player error:",e,t),!0===(null===t||void 0===t?void 0:t.fatal)){c(P.Error);const e=null!==t&&void 0!==t&&t.type?`${t.type} ${t.details}`:"Unknown error";p(e),console.warn("Retry"),g(d)}})(e,t)})]}),Object(O.jsxs)("div",{className:"MediaPlayerBottom",children:[Object(O.jsx)("div",{children:Object(O.jsx)(v,{})}),Object(O.jsx)("div",{children:Object(O.jsx)(E,{simple:!0})}),Object(O.jsx)("div",{...x,children:Object(O.jsx)("input",{type:"range",min:0,max:1,step:"any",value:o,onChange:e=>s(parseFloat(e.target.value))})}),Object(O.jsx)("div",{...x,children:Object(O.jsx)("div",{className:"select is-small is-dark",children:Object(O.jsxs)("select",{value:t||"",onChange:t=>(t=>{p(""),clearTimeout(e.current),a(t),localStorage.setItem(T,t)})(t.target.value),children:[Object(O.jsx)("option",{value:"",children:"\u21e8 Choose channel"}),i&&Object(O.jsx)(O.Fragment,{children:Object.keys(i.reduce(((e,t)=>(e[t.category]=t.category,e)),{})).map(((e,t)=>Object(O.jsx)("optgroup",{label:e,children:i.filter((t=>t.category===e)).map(((e,t)=>Object(O.jsx)("option",{value:e.id,children:e.name},t)))},t)))})]})})})]})]})};a(49),a(50);var _=function(e){const[t,a]=Object(n.useState)(0);return Object(n.useEffect)((()=>(function(e,t,a){let n=e.getElementById(a);const r=e.getElementsByTagName(t)[0];n||(n=e.createElement(t),n.id=a,n.src="https://weatherwidget.io/js/widget.min.js",r&&r.parentNode&&r.parentNode.insertBefore(n,r))}(document,"script","weatherwidget-io-js"),()=>{const e=document.getElementById("weatherwidget-io-js");e&&e.parentNode&&e.parentNode.removeChild(e)})),[t]),Object(n.useEffect)((()=>{const e=setInterval((()=>{a((e=>e+1))}),194e5);return()=>clearInterval(e)}),[]),Object(O.jsx)("div",{dangerouslySetInnerHTML:{__html:'\n<a class="weatherwidget-io" href="https://forecast7.com/en/41d392d17/barcelona/" data-label_1="BARCELONA" data-label_2="WEATHER" data-font="Arial Black" data-days="3" data-theme="pure" data-basecolor="" data-shadow="#000000" data-accent="" data-textcolor="#ffffff" data-highcolor="#ffffff" data-lowcolor="#ffffff" data-suncolor="#ffce00" data-mooncolor="#b8b8b8" data-cloudcolor="#878787" data-cloudfill="#c0c0c0" data-raincolor="#00d0b8" data-snowcolor="#b1fefa" >BARCELONA WEATHER</a>\n'}},t)};const I=Array.from({length:167},((e,t)=>`d${t+1}.jpg`)),M=m.backgroundImageUpdateIntervalSeconds;const A={routes:[{path:"/MediaPlayer",Component:R},{path:"/",Component:function(){const[e,t]=Object(n.useState)(a());function a(){return I[Math.floor(Math.random()*I.length)]}return Object(n.useEffect)((()=>{const e=setInterval((()=>t(a())),1e3*M);return()=>clearInterval(e)}),[]),Object(O.jsxs)("div",{className:"MainScreen",style:{backgroundImage:`url(/smart-clock/backgrounds_andrei/${e})`},children:[Object(O.jsx)("div",{className:"top",children:Object(O.jsx)(v,{})}),Object(O.jsx)("div",{className:"bottom",children:Object(O.jsx)(_,{})})]})}}]};let C=!1;var W=function(){const[e,t]=Object(n.useState)("left"),a=Object(n.useRef)({start:0,end:0}),r=Object(i.f)(),c=Object(i.g)(),o=e=>e.clientX||(e.targetTouches&&e.targetTouches.length>0?e.targetTouches[0].clientX:0),s=e=>{a.current.start=o(e),a.current.end=o(e)},u=e=>{a.current.end=o(e)},j=e=>{const n=r.location.pathname,c=a.current,o=A.routes.findIndex((e=>e.path===n));let s=null;if(c.start-c.end>50)s=o-1,s<0&&(s=A.routes.length-1),t("left");else if(c.start-c.end<-50)s=o+1,s>A.routes.length-1&&(s=0),t("right");else if(!C||null===document.fullscreenElement)try{document.body.requestFullscreen(),C=!0}catch(i){console.error(i)}null!==s&&r.push(A.routes[s].path),c.start=0};return Object(O.jsxs)("div",{className:`App AppSwipe-${e}`,onMouseDown:s,onMouseMove:u,onMouseUp:j,onTouchEnd:j,onTouchMove:u,onTouchStart:s,children:[Object(O.jsx)("div",{className:"AppPortraitWarning",children:"\u26a0\ufe0f Please rotate your device."}),Object(O.jsx)(l.a,{component:null,children:Object(O.jsx)(d.a,{classNames:"AppScreen",timeout:300,children:Object(O.jsx)(i.c,{location:c,children:A.routes.map((e=>{let{path:t,Component:a}=e;return Object(O.jsx)(i.a,{path:t,children:Object(O.jsx)("div",{className:"AppScreen",children:Object(O.jsx)(a,{})})},t)}))})},c.pathname)})]})};var L=e=>{e&&e instanceof Function&&a.e(17).then(a.bind(null,74)).then((t=>{let{getCLS:a,getFID:n,getFCP:r,getLCP:c,getTTFB:o}=t;a(e),n(e),r(e),c(e),o(e)}))};o.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(s.a,{children:Object(O.jsx)(W,{})})}),document.getElementById("root")),L()}},[[56,15,16]]]);
//# sourceMappingURL=main.99b00b75.chunk.js.map